<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Temps vécu — Équilibre doux</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="app-header"></header>

    <main>
      <!-- Today View -->
      <section id="view-today" class="view active" aria-labelledby="tab-today">
        <div class="day-bar">
          <button id="prev-day" class="icon-btn" title="Jour précédent">◀</button>
          <label for="date">Jour</label>
          <input type="date" id="date" />
          <button id="next-day" class="icon-btn" title="Jour suivant">▶</button>
          <div class="spacer"></div>
        </div>

        <div id="week-strip" class="week-strip" aria-label="Semaine"></div>

        

        <div id="buckets" class="buckets" aria-live="polite"></div>

        <div class="note-area">
          <div class="emotion-picker" id="emotion-picker" aria-label="Émotion du jour"></div>
          <textarea id="note" rows="3" placeholder="Une petite note, une sensation, un souvenir… (facultatif)"></textarea>
        </div>
      </section>

      <!-- Stats View -->
      <section id="view-stats" class="view" aria-labelledby="tab-stats">
        <div class="filters">
          <label for="range">Période</label>
          <select id="range">
            <option value="7">7 jours</option>
            <option value="30" selected>30 jours</option>
            <option value="this-month">Ce mois</option>
            <option value="all">Tout</option>
          </select>
          <label for="chart-type">Type</label>
          <select id="chart-type">
            <option value="donut" selected>Donut</option>
            <option value="bars">Barres empilées</option>
            <option value="heat">Calendrier chaleur</option>
          </select>
          <label class="checkbox"><input type="checkbox" id="as-percent" /> %</label>
          <label for="group-by">Grouper</label>
          <select id="group-by">
            <option value="theme" selected>Thème</option>
            <option value="category">Catégorie</option>
          </select>
        </div>
        <div id="stats-summary" class="stats-summary" aria-live="polite"></div>
        <div class="charts">
          <canvas id="pie" width="360" height="360" aria-label="Répartition du temps" role="img"></canvas>
          <canvas id="bars" width="640" height="280" aria-label="Temps par jour (empilé)" role="img" style="display:none"></canvas>
          <canvas id="heatmap" width="640" height="220" aria-label="Chaleur par jour de la semaine" role="img" style="display:none"></canvas>
          <div id="stats-legend" class="legend"></div>
        </div>

        <h3>Émotions</h3>
        <div class="charts">
          <canvas id="emotion-pie" width="360" height="360" aria-label="Répartition des émotions" role="img"></canvas>
          <canvas id="emotion-weekday" width="640" height="280" aria-label="Émotions par jour de la semaine" role="img"></canvas>
          <div id="emotion-legend" class="legend"></div>
        </div>
      </section>

      <!-- Settings View -->
      <section id="view-settings" class="view" aria-labelledby="tab-settings">
        <div class="settings-actions">
          <button id="add-theme" class="ghost">+ Ajouter un thème</button>
        </div>
        <ul id="themes-list" class="themes-list"></ul>

        <h3>Émotions</h3>
        <div class="settings-actions">
          <button id="add-emotion" class="ghost">+ Ajouter une émotion</button>
        </div>
        <ul id="emotions-list" class="themes-list"></ul>

        <h3>Apparence</h3>
        <div class="appearance">
          <label for="ring-thickness">Épaisseur du cercle</label>
          <input type="range" id="ring-thickness" min="8" max="28" step="1" />
          <span id="ring-thickness-val"></span>
          <span style="width:1rem"></span>
          <label for="handle-diameter">Diamètre de la poignée</label>
          <input type="range" id="handle-diameter" min="8" max="36" step="1" />
          <span id="handle-diameter-val"></span>
        </div>

        <h3>Données</h3>
        <div class="data-actions">
          <button id="export-json">Exporter JSON</button>
          <button id="import-json">Importer JSON</button>
          <input type="file" id="import-file" accept="application/json" style="display:none" />
          <button id="save-to-file" class="ghost" title="Expérimental (navigateur compatible)">Enregistrer sur un fichier…</button>
        </div>
      </section>
    </main>

    <footer class="app-footer"></footer>

    <script src="app.js"></script>
    
    <!-- Bottom navigation -->
    <nav class="bottom-nav" role="tablist" aria-label="Navigation">
      <div class="bottom-tabs" role="group" aria-label="Onglets">
        <button class="tab active" data-tab="today" aria-selected="true" aria-current="page" aria-controls="view-today" aria-label="Aujourd'hui" title="Aujourd'hui" data-tooltip="Aujourd'hui">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" focusable="false">
            <path d="M7 2a1 1 0 0 1 1 1v1h8V3a1 1 0 1 1 2 0v1h1a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1V3a1 1 0 0 1 1-1Zm12 7H5v9a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V9ZM6 7h12V6H6v1Z"/>
          </svg>
          <span class="sr-only">Aujourd'hui</span>
        </button>
        <button class="tab" data-tab="stats" aria-selected="false" aria-controls="view-stats" aria-label="Statistiques" title="Statistiques" data-tooltip="Stats">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" focusable="false">
            <path d="M4 20a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v14a1 1 0 0 1-1 1Zm5 0a1 1 0 0 1-1-1V9a1 1 0 1 1 2 0v10a1 1 0 0 1-1 1Zm5 0a1 1 0 0 1-1-1V6a1 1 0 1 1 2 0v13a1 1 0 0 1-1 1Zm5 0a1 1 0 0 1-1-1V12a1 1 0 1 1 2 0v7a1 1 0 0 1-1 1Z"/>
          </svg>
          <span class="sr-only">Statistiques</span>
        </button>
        <button class="tab" data-tab="settings" aria-selected="false" aria-controls="view-settings" aria-label="Thèmes" title="Thèmes" data-tooltip="Thèmes">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" focusable="false">
            <path d="M12 3a7 7 0 0 0-7 7c0 2.761 2.239 5 5 5h1a1 1 0 0 1 1 1v1c0 1.657 1.343 3 3 3a4 4 0 0 0 0-8h-1a1 1 0 0 1-1-1V9a6 6 0 0 0-6-6Zm-1 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm-3 3a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm6-3a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Z"/>
          </svg>
          <span class="sr-only">Thèmes</span>
        </button>
      </div>
      <div class="bottom-user">
        <label class="sr-only" for="user">Utilisateur</label>
        <select id="user" aria-label="Utilisateur">
          <option>Seb</option>
          <option>Soaz</option>
        </select>
      </div>
    </nav>
  </body>
  </html>
